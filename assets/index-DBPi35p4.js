(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();const p="https://en.wikipedia.org/w/api.php",y=async(t,n=3)=>{const e={action:"parse",page:t,prop:"wikitext",section:n.toString(),format:"json",origin:"*"};try{const o=`${p}?${new URLSearchParams(e).toString()}`,r=await fetch(o);if(!r.ok)throw new Error("Failed to fetch bear data");return(await r.json()).parse.wikitext["*"]}catch(o){throw console.error("Error fetching bear data:",o),o}},b=async t=>{var e,o,r;const n={action:"query",titles:`File:${t}`,prop:"imageinfo",iiprop:"url",format:"json",origin:"*"};try{const a=`${p}?${new URLSearchParams(n).toString()}`,i=await fetch(a);if(!i.ok)throw new Error("Failed to fetch image data");const c=(await i.json()).query.pages;return((r=(o=(e=Object.values(c)[0])==null?void 0:e.imageinfo)==null?void 0:o[0])==null?void 0:r.url)??""}catch(a){throw console.error("Error fetching image URL:",a),a}},w=async t=>{try{return(await fetch(t,{method:"HEAD"})).ok?t:"https://via.placeholder.com/200x200.png?text=Image+Not+Available"}catch(n){return console.error("Error checking image availability:",n),"https://via.placeholder.com/200x200.png?text=Image+Not+Available"}},u="https://via.placeholder.com/200x200.png?text=Image+Not+Available",x=()=>{const t=document.querySelector(".show-hide"),n=document.getElementById("comment-wrapper");if(t===null||n===null){console.error("Required elements not found in the DOM");return}n.hidden=!0,t.textContent="Show comments",t.setAttribute("aria-expanded","false"),t.onclick=()=>{const e=t.getAttribute("aria-expanded")==="true";if(t.setAttribute("aria-expanded",(!e).toString()),n.hidden=e,t.textContent=e?"Show comments":"Hide comments",!e){const o=document.getElementById("name");o==null||o.focus()}}},v=async t=>{const n=document.querySelector(".more_bears");if(n===null){console.error("The .more_bears element was not found in the DOM");return}if(t.length===0){n.innerHTML="<p>No bear data available at the moment. Please try again later.</p>";return}for(const e of t){const o=await w(e.image!==""?e.image:u),r=document.createElement("div"),a=o===u;r.innerHTML=`
  <h4 class="bear-name">${e.name} (${e.binomial})</h4>
  <img src="${o}" alt="${a?"No image available for "+e.name:"Image of "+e.name}" style="width:200px; height:auto;">
  <p><strong>Range:</strong> ${e.range}</p>
`,n.appendChild(r)}},S=()=>{const t=document.querySelector(".comment-form"),n=document.querySelector(".comment-container");if(t===null||n===null){console.error("Form or comment container not found in the DOM");return}const e=document.createElement("p");e.setAttribute("role","alert"),e.setAttribute("aria-live","assertive"),e.style.color="red",e.style.display="none",e.textContent="Both name and comment are required.",t.appendChild(e),t.onsubmit=o=>{o.preventDefault();const r=t.elements.namedItem("name").value.trim(),a=t.elements.namedItem("comment").value.trim();if(r===""||a===""){e.style.display="block",e.textContent="",setTimeout(()=>{e.textContent="Both name and comment are required."},10);return}e.style.display="none";const i=new SpeechSynthesisUtterance("Comment submitted successfully!");window.speechSynthesis.speak(i);const s=document.createElement("li");s.innerHTML=`<p>${r}</p><p>${a}</p>`,n.appendChild(s),t.reset()}};function E(){const t=document.getElementById("transcript"),n=document.getElementById("transcript-toggle");if(t===null||n===null){console.error("Transcript or toggle button not found in the DOM");return}let e=document.getElementById("live-region");e===null&&(e=document.createElement("div"),e.id="live-region",e.setAttribute("aria-live","assertive"),e.setAttribute("role","status"),e.style.position="absolute",e.style.width="1px",e.style.height="1px",e.style.overflow="hidden",e.style.clip="rect(1px, 1px, 1px, 1px)",document.body.appendChild(e));const o=n.getAttribute("aria-expanded")==="true";n.setAttribute("aria-expanded",(!o).toString()),t.hidden=o,n.textContent=o?"Show Transcript":"Hide Transcript",e.textContent=o?"Transcript closed.":"Transcript opened. Use arrow keys to read the content."}const m=document.getElementById("transcript-toggle");m==null||m.addEventListener("click",E);const I="List_of_ursids",A=async t=>{var o;const n=t.split("{{Species table/end}}"),e=[];for(const r of n){const a=r.split("{{Species table/row");for(const i of a){const s=i.match(/\|name=\[\[(.*?)\]\]/),c=i.match(/\|binomial=(.*?)\n/),d=i.match(/\|image=(.*?)\n/),l=i.match(/\|range=([^|\n]+)/);if(s!==null&&c!==null&&d!==null){const g=(l!==null&&((o=l[1])==null?void 0:o.trim())!==""?l[1].trim():"Range information not available").replace(/\s*\(.*?\)\s*/g,""),h=await b(d[1].trim().replace("File:","")),f={name:s[1],binomial:c[1],image:h,range:g};e.push(f)}}}return e},B=async()=>{x(),S();try{const t=await y(I),n=await A(t);await v(n)}catch(t){console.error("Error initializing application:",t);const n=document.querySelector(".more_bears");n!==null&&(n.innerHTML="<p>Error loading bear data. Please try again later.</p>")}};B().catch(t=>{console.error("Initialization error:",t)});
